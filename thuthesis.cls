%%
%% This is file `thuthesis.cls',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% thuthesis.dtx  (with options: `cls')
%% 
%% This is a generated file.
%% 
%% Copyright (C) 2005-2017 by Ruini Xue <xueruini@gmail.com>
%% 
%% This file may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.3a
%% of this license or (at your option) any later version.
%% The latest version of this license is in:
%% 
%% http://www.latex-project.org/lppl.txt
%% 
%% and version 1.3a or later is part of all distributions of LaTeX
%% version 2004/10/01 or later.
%% 
%% To produce the documentation run the original source files ending with `.dtx'
%% through LaTeX.
%% 
%%%%%%%%%%      Luthesis v1.1      %%%%%%%%%%
%%% è¯¥æ¨¡æ¿ä¸ºå…°å·ç†å·¥å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡æ¨¡æ¿  %%%
%%% åŸºäº ThuThesis LATEX Template ä¿®æ”¹    %%%
%%% @Author Yang Guoqiang                 %%%
%%% Email estivalinp@163.com              %%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}[1999/12/01]
\ProvidesClass{thuthesis}
[2017/03/26 5.3.2 Tsinghua University Thesis Template]
\hyphenation{Thu-Thesis}
\def\thuthesis{\textsc{ThuThesis}}
\def\version{5.3.2}

% estivalæ–°å¢
% è¡¨æ ¼æ‰‹åŠ¨æ¢è¡Œ
\newcommand{\tabincell}[2]{\begin{tabular}{@{}#1@{}}#2\end{tabular}}
% è¡¨æ ¼å¯¹é½
\newcommand{\tc}[1]{\multicolumn{1}{c}{#1}} %å±…ä¸­å¯¹é½
\newcommand{\tl}[1]{\multicolumn{1}{l}{#1}} %å·¦å¯¹é½
\newcommand{\tr}[1]{\multicolumn{1}{r}{#1}} %å³å¯¹é½
% æ¡æ¬¾æ ¼å¼ï¼ˆæ¥æ’ï¼‰
%line251%\setenumerate{fullwidth,itemindent=\parindent,listparindent=\parindent,itemsep=0ex,partopsep=0pt,parsep=0ex}
% è„šæ³¨å›¾æ ‡
%\RequirePackage{pifont}
%\RequirePackage{thuthesis}
%\usepackage{wasysym}   % æ–¹æ¡†å¯¹å· line 132 é¿å…é‡å¤ï¼Œå¿…é¡»æ”¾å…¥asmtexä¹‹å estival 2018å¹´4æœˆ8æ—¥09:47:30
\RequirePackage{changepage}   %æ•´æ®µç¼©è¿›
% è¡¨æ ¼è¡Œé«˜
%\usepackage{array}  
%\usepackage{booktabs} %è°ƒæ•´è¡¨æ ¼çº¿ä¸ä¸Šä¸‹å†…å®¹çš„é—´éš”  
\RequirePackage{multirow}
% ç®—æ³•
%\usepackage{algorithm}
%\usepackage{algorithmicx}
%\usepackage{algpseudocode}
\usepackage{eqparbox} % å¯¹å‹¾


\usepackage{amssymb}

% original
\RequirePackage{kvoptions}
\SetupKeyvalOptions{
  family=thu,
  prefix=thu@,
  setkeys=\kvsetkeys}
\newif\ifthu@bachelor
\newif\ifthu@master
\newif\ifthu@doctor
\newif\ifthu@postdoctor
\thu@mastertrue
\define@key{thu}{type}{%
  \thu@bachelorfalse
  \thu@masterfalse
  \thu@doctorfalse
  \thu@postdoctorfalse
  \expandafter\csname thu@#1true\endcsname}
\def\thu@deprecated@type@option{%
  \kvsetkeys{thu}{type=\CurrentOption} % for compatability.
  \ClassError{thuthesis}{Option '\CurrentOption' is deprecated, \MessageBreak
                         please use 'type=\CurrentOption' instead}{}}
\DeclareVoidOption{bachelor}{\thu@deprecated@type@option}
\DeclareVoidOption{master}{\thu@deprecated@type@option}
\DeclareVoidOption{doctor}{\thu@deprecated@type@option}
\DeclareVoidOption{postdoctor}{\thu@deprecated@type@option}
\DeclareBoolOption{secret}
\DeclareBoolOption{arialtoc}
\DeclareBoolOption{arialtitle}
\DeclareBoolOption{raggedbottom}
\DeclareBoolOption{pifootnote}
\DeclareBoolOption{mangshen}
\DeclareDefaultOption{\PassOptionsToClass{\CurrentOption}{ctexbook}}
\kvsetkeys{thu}{% set true
  raggedbottom,
  pifootnote}
\ProcessKeyvalOptions*
\PassOptionsToPackage{no-math}{fontspec}
\LoadClass[a4paper,openany,UTF8,zihao=-4,scheme=plain]{ctexbook}
\ifthu@bachelor\relax\else
  \ifthu@master\relax\else
    \ifthu@doctor\relax\else
      \ifthu@postdoctor\relax\else
        \ClassError{thuthesis}%
                   {Please specify thesis type in option: \MessageBreak
                    type=[bachelor | master | doctor | postdoctor]}{}
      \fi
    \fi
  \fi
\fi
\RequirePackage{etoolbox}
\RequirePackage{ifxetex}
\RequirePackage{xparse}
\RequirePackage{amsmath}
\RequirePackage[defaultsups]{newtxtext} % æ­£æ–‡ä½¿ç”¨Times New Romanå­—ä½“
%\RequirePackage{newtxmath} % å…¬å¼ä½¿ç”¨Times New Romanå­—ä½“
\RequirePackage{courier}
\RequirePackage{graphicx}
\RequirePackage[labelformat=simple]{subcaption}
\RequirePackage{pdfpages}
\includepdfset{fitpaper=true}
\RequirePackage[shortlabels]{enumitem}
\RequirePackage{environ}
\ifthu@raggedbottom
  \RequirePackage[bottom,perpage,hang]{footmisc}
  \raggedbottom
\else
  \RequirePackage[perpage,hang]{footmisc}
\fi
\ifthu@pifootnote
  \RequirePackage{pifont}
\fi
\RequirePackage{CJKfntef}
\RequirePackage[amsmath,thmmarks,hyperref]{ntheorem}
\RequirePackage{array}
\RequirePackage{longtable}
\RequirePackage{booktabs}
\RequirePackage[numbers,super,sort&compress]{natbib}
\patchcmd{\@chapter}{\addtocontents{lof}{\protect\addvspace{10\p@}}}{}{}{} % lof
\patchcmd{\@chapter}{\addtocontents{lot}{\protect\addvspace{10\p@}}}{}{}{} % lot
\patchcmd{\@chapter}{\addtocontents{loa}{\protect\addvspace{10\p@}}}{}{}{} % loa
\RequirePackage{hyperref}
% æ–¹æ¡†å¯¹å·
\RequirePackage{wasysym}
% å…¬å¼
%\usepackage{unicode-math}
%\setmathfont{Latin Modern Math}
% ç®—æ³• å¿…é¡»æ”¾åœ¨è¿™ï¼Œä¸ç„¶ç¼©è¿›ä¼šå‡ºé—®é¢˜ï¼ˆæŠ˜ç£¨äº†ä¸€ä¸‹åˆï¼‰2018å¹´4æœˆ8æ—¥21:27:11
% å¸¦æ ‡å·ã€å¸¦ç« èŠ‚ç¼–å·
\usepackage[ruled,linesnumbered,resetcount,algochapter]{algorithm2e} %vlined
\usepackage{setspace} % ç®—æ³•è¡Œè·

\usepackage{tocbibind} % ç®—æ³•ç´¢å¼•
\usepackage{wasysym}   % æ–¹æ¡†å¯¹å·
\usepackage{changepage}   %æ•´æ®µç¼©è¿›
% è¡¨æ ¼è¡Œé«˜
%\usepackage{array}  
%\usepackage{booktabs} %è°ƒæ•´è¡¨æ ¼çº¿ä¸ä¸Šä¸‹å†…å®¹çš„é—´éš”  
\usepackage{multirow} % è¡¨æ ¼å†…æ¢è¡Œ

% ç®—æ³•æ³¨é‡Š
\newlength\algowd
\def\savewd#1{\setbox0=\hbox{#1\hspace{.7in}}\algowd=\wd0\relax#1}
\newcommand\algolines[2]{\savewd{#1}%
  \tcp*{\parbox[t]{\dimexpr\algowidth-\algowd-30pt}{#2}}}
\SetNlSty{sihao}{}{:} % è¡Œå·
% ç®—æ³•ä¸‰çº¿ç²—ç»†
\setlength{\algoheightrule}{1.5pt} % thickness of the rules above and below
\setlength{\algotitleheightrule}{0.5pt} % thicknes of the rule below the title
% è¡¨æ ¼å®½åº¦
\usepackage{tabularx}
% æ­¥éª¤1 æ­¥éª¤2
\newlist{steps}{enumerate}{1}
\setlist[steps, 1]{label = {\heiti æ­¥éª¤} \arabic*:}
% äº‹å®1 äº‹å®2
\newlist{fact}{enumerate}{1}
\setlist[fact, 1]{label = {\heiti äº‹å®} \arabic*:}
% ç»­æ’123
\newlist{xupai}{enumerate}{1}
\setlist[xupai, 1]{label = \arabic*.}

%åˆ—è¡¨ç¯å¢ƒé¦–è¡Œç¼©è¿›
\usepackage{indentfirst}

% æ—‹è½¬å†…å®¹
\usepackage{rotating}

% ç‰¹æ®Šç¬¦å·ï¼ˆç¬‘è„¸ğŸ˜‹ï¼‰
\usepackage{fontspec}
\newfontfamily\DejaSans{DejaVu Sans}

%åˆ é™¤ç©ºç™½é¡µä¸­çš„é¡µçœ‰
\usepackage{emptypage}

% estival åˆ é™¤å›¾è¡¨ç›®å½•ç« èŠ‚åˆ†éš” 2018å¹´4æœˆ12æ—¥02:39:55 
%\def\@chapter[#1]#2{\ifnum \c@secnumdepth >\m@ne
%                       \if@mainmatter
%                         \refstepcounter{chapter}%
%                         \typeout{\@chapapp\space\thechapter.}%
%                         \addcontentsline{toc}{chapter}%
%                                   {\protect\numberline{\thechapter}#1}%
%                       \else
%                         \addcontentsline{toc}{chapter}{#1}%
%                       \fi
%                    \else
%                      \addcontentsline{toc}{chapter}{#1}%
%                    \fi
%                    \chaptermark{#1}%
%%                    \addtocontents{lof}{\protect\addvspace{10\p@}}% NEW
%%                    \addtocontents{lot}{\protect\addvspace{10\p@}}% NEW
%                    \if@twocolumn
%                      \@topnewpage[\@makechapterhead{#2}]%
%                    \else
%                      \@makechapterhead{#2}%
%                      \@afterheading
%                    \fi}


\ifxetex
  \hypersetup{%
    CJKbookmarks=true}
\else
  \hypersetup{%
    unicode=true,
    CJKbookmarks=false}
\fi
\hypersetup{%
  linktoc=all,
  bookmarksnumbered=true,
  bookmarksopen=true,
  bookmarksopenlevel=1,
  breaklinks=true,
  colorlinks=false,
  plainpages=false,
  pdfborder=0 0 0}
\urlstyle{same}

% é¡µé¢è®¾ç½®
\newlength{\alphabet}
\settowidth{\alphabet}{\normalfont abcdefghijklmnopqrstuvwxyz}
\RequirePackage{geometry}
\geometry{
  a4paper, % 210 * 297mm
  hcentering,
  ignoreall,
  nomarginpar}
\geometry{
	left=25mm,
	right=25mm,
	top=22mm,
	bottom=22mm,
	headheight=5mm,
	headsep=7mm,
	textheight=253mm,
	textwidth=155mm,
	footskip=11mm,
	textwidth=2.5\alphabet,
	hmarginratio={2:3}}
\RequirePackage{fancyhdr}
\let\thu@cleardoublepage\cleardoublepage
\newcommand{\thu@clearemptydoublepage}{%
  \clearpage{\pagestyle{thu@empty}\thu@cleardoublepage}}
\let\cleardoublepage\thu@clearemptydoublepage
\renewcommand\frontmatter{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \@mainmatterfalse
  \pagenumbering{Roman}
  \pagestyle{thu@empty}}
\renewcommand\mainmatter{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \@mainmattertrue
  \pagenumbering{arabic}
  \ifthu@bachelor\pagestyle{thu@plain}\else\pagestyle{thu@headings}\fi}
\renewcommand\backmatter{%
  \if@openright\cleardoublepage\else\clearpage\fi
  \@mainmattertrue}
\renewcommand\normalsize{%
  \@setfontsize\normalsize{12bp}{20bp}%
  \abovedisplayskip=10bp \@plus 2bp \@minus 2bp
  \abovedisplayshortskip=10bp \@plus 2bp \@minus 2bp
  \belowdisplayskip=\abovedisplayskip
  \belowdisplayshortskip=\abovedisplayshortskip}
\def\thu@def@fontsize#1#2{%
  \expandafter\newcommand\csname #1\endcsname[1][1.3]{%
    \fontsize{#2}{##1\dimexpr #2}\selectfont}}
\thu@def@fontsize{chuhao}{42bp}
\thu@def@fontsize{xiaochu}{36bp}
\thu@def@fontsize{yihao}{26bp}
\thu@def@fontsize{xiaoyi}{24bp}
\thu@def@fontsize{erhao}{22bp}
\thu@def@fontsize{xiaoer}{18bp}
\thu@def@fontsize{sanhao}{16bp}
\thu@def@fontsize{xiaosan}{15bp}
\thu@def@fontsize{sihao}{14bp}
\thu@def@fontsize{banxiaosi}{13bp}
\thu@def@fontsize{xiaosi}{12bp}
\thu@def@fontsize{dawu}{11bp}
\thu@def@fontsize{wuhao}{10.5bp}
\thu@def@fontsize{xiaowu}{9bp}
\thu@def@fontsize{liuhao}{7.5bp}
\thu@def@fontsize{xiaoliu}{6.5bp}
\thu@def@fontsize{qihao}{5.5bp}
\thu@def@fontsize{bahao}{5bp}
%é¡µçœ‰é¡µè„š
\fancypagestyle{thu@empty}{%
  \fancyhf{}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}}
\fancypagestyle{thu@plain}{%
  \fancyhead{}
  \fancyfoot[C]{\xiaowu\thepage}
  \renewcommand{\headrulewidth}{0pt}
  \renewcommand{\footrulewidth}{0pt}}
\fancypagestyle{thu@headings}{%
  \fancyhead{}
  \fancyfoot{}
  \fancyhead[CO]{\wuhao \thu@apply} %å¥‡æ•°é¡µçœ‰ä¸­éƒ¨
  \fancyhead[CE]{\wuhao \thu@ctitle} %å¶æ•°é¡µçœ‰ä¸­éƒ¨
  \fancyfoot[C]{\wuhao \thepage}
  \def\headrule{{\if@fancyplain\let\headrulewidth\plainheadrulewidth\fi%
  \hrule\@height 3pt \@width\headwidth\vskip1pt %ä¸Šé¢çº¿ä¸º1ptç²—
  \hrule\@height 0.75pt\@width\headwidth %ä¸‹é¢0.5ptç²—
  \vskip-2\headrulewidth\vskip-1pt} %ä¸¤æ¡çº¿çš„è·ç¦»1pt
  \vspace{5mm}}     %åŒçº¿ä¸ä¸‹é¢æ­£æ–‡ä¹‹é—´çš„å‚ç›´é—´è·
  \makeatother  }

\ctexset{%
  punct=quanjiao,
  space=auto,
  autoindent=true}
\setlist{nosep}
\def\thu@textcircled#1{%
  \ifnum\value{#1} >9
    \ClassError{thuthesis}%
      {Too many footnotes in this page.}{Keep footnote less than 10.}
  \fi
  \ifthu@pifootnote%
    \ding{\the\numexpr\value{#1}+171\relax}%
  \else%
    %\textcircled{\xiaoliu\arabic{#1}}%
%    \tikz[baseline=(char.base)]
%    \node[shape=circle,draw,inner sep=0.5pt,minimum size=8pt] (char) {#1};
	\ding{\the\numexpr\value{#1}+171\relax}%
  \fi}
\renewcommand{\thefootnote}{\thu@textcircled{footnote}}
\renewcommand{\thempfootnote}{\thu@textcircled{mpfootnote}}
\def\footnoterule{\vskip-3\p@\hrule\@width0.3\textwidth\@height0.4\p@\vskip5\p@}
\let\thu@footnotesize\footnotesize
\renewcommand\footnotesize{\thu@footnotesize\wuhao[1.5]}
\footnotemargin1em\relax
\let\thu@makefnmark\@makefnmark
\def\thu@@makefnmark{\hbox{{\normalfont\@thefnmark}}}
\pretocmd{\@makefntext}{\let\@makefnmark\thu@@makefnmark}{}{}
\apptocmd{\@makefntext}{\let\@makefnmark\thu@makefnmark}{}{}
\allowdisplaybreaks[4]
% æ¡æ¬¾æ ¼å¼ï¼ˆç¼©è¿›ã€æ¥æ’ï¼‰
\setenumerate{fullwidth,itemindent=\parindent,listparindent=\parindent,itemsep=0ex,partopsep=0pt,parsep=0ex,label=ï¼ˆ\arabic*ï¼‰,topsep=6bp,labelsep=0pt}
% å…¬å¼ç¼–å·æ–¹å¼
\renewcommand\theequation{\ifnum \c@chapter>\z@ \thechapter.\fi\@arabic\c@equation}
\def\make@df@tag{\@ifstar\thu@make@df@tag@@\make@df@tag@@@}
\def\thu@make@df@tag@@#1{\gdef\df@tag{\thu@maketag{#1}\def\@currentlabel{#1}}}
\iffalse
\ifthu@bachelor
  \def\thu@maketag#1{\maketag@@@{%
    (\ignorespaces\text{\equationname\hskip0.5em}#1\unskip\@@italiccorr)}}
  \def\tagform@#1{\maketag@@@{%
    (\ignorespaces\text{\equationname\hskip0.5em}#1\unskip\@@italiccorr)\equcaption{#1}}}
\fi
\fi
\def\thu@maketag#1{\maketag@@@{(\ignorespaces #1\unskip\@@italiccorr)}}
\def\tagform@#1{\maketag@@@{(\ignorespaces #1\unskip\@@italiccorr)\equcaption{#1}}}
\renewcommand{\eqref}[1]{\textup{(\ref{#1})}}
%å®šç†
\theorembodyfont{\rmfamily\songti}
\theoremheaderfont{\rmfamily\heiti}
\setlength{\floatsep}{20bp \@plus4pt \@minus1pt}
\setlength{\intextsep}{20bp \@plus4pt \@minus2pt}
\setlength{\textfloatsep}{20bp \@plus4pt \@minus2pt}
\setlength{\@fptop}{0bp \@plus1.0fil}
\setlength{\@fpsep}{12bp \@plus2.0fil}
\setlength{\@fpbot}{0bp \@plus1.0fil}
\renewcommand{\textfraction}{0.15}
\renewcommand{\topfraction}{0.85}
\renewcommand{\bottomfraction}{0.65}
\renewcommand{\floatpagefraction}{0.60}
\ifthu@bachelor
  \g@addto@macro\appendix{\renewcommand*{\thefigure}{\thechapter-\arabic{figure}}}
  \g@addto@macro\appendix{\renewcommand*{\thetable}{\thechapter-\arabic{table}}}
\fi
\let\old@tabular\@tabular
\def\thu@tabular{\wuhao[1.5]\old@tabular}
\DeclareCaptionLabelFormat{thu}{{\wuhao[1.5]\heiti #1~\rmfamily #2}}
\DeclareCaptionLabelSeparator{thu}{\hspace{0.5em}}
\DeclareCaptionFont{thu}{\heiti\wuhao[1.5]}
\captionsetup{labelformat=thu,labelsep=thu,font=thu}
\captionsetup[table]{position=top,belowskip={12bp-\intextsep},aboveskip=6bp}
\captionsetup[figure]{position=bottom,belowskip={12bp-\intextsep},aboveskip=6bp}
\captionsetup[sub]{font=thu,skip=6bp}
\renewcommand{\thesubfigure}{(\alph{subfigure})}
\renewcommand{\thesubtable}{(\alph{subtable})}
\let\thu@LT@array\LT@array
\def\LT@array{\wuhao[1.5]\thu@LT@array} % set default font size
\def\hlinewd#1{%
  \noalign{\ifnum0=`}\fi\hrule \@height #1 \futurelet
    \reserved@a\@xhline}
\def\thu@title@font{%
  %\ifthu@arialtitle\sffamily\else\relax\fi}
  \ifthu@arialtitle\rmfamily\else\relax\fi} % æ ‡é¢˜ç½—é©¬ä½“ estival 2018å¹´4æœˆ7æ—¥10:35:57
\AtBeginDocument{%
  \pagestyle{thu@empty}
  \renewcommand{\chaptermark}[1]{\@mkboth{\CTEXthechapter\hskip\ccwd#1}{}}}
% æ ‡é¢˜æ ¼å¼
\newcommand\thu@chapter@titleformat[1]{%
  \ifthu@bachelor #1\else%
    \ifthenelse%
      {\equal{#1}{\eabstractname}}%
      {\bfseries #1}%
      {#1}%
  \fi}
\ctexset{%
  chapter={
    afterindent=true,
    pagestyle={\ifthu@bachelor thu@plain\else thu@headings\fi},
    beforeskip={6bp},
    aftername=\hskip\ccwd,
    afterskip={18bp},
    format={\centering\thu@title@font\heiti\xiaoer[1]},
    nameformat=\relax,
    numberformat=\relax,
    titleformat=\thu@chapter@titleformat,
  },
  section={
    afterindent=true,
    beforeskip={12bp \@plus 1ex \@minus .2ex},
    afterskip={12bp \@plus .2ex},
    aftername=\hskip 0.5\ccwd,
    format={\thu@title@font\heiti\xiaosan[1.429]},
  },
  subsection={
    afterindent=true,
    beforeskip={6bp \@plus 1ex \@minus .2ex},
    afterskip={6bp \@plus .2ex},
    aftername=\hskip 0.5\ccwd,
    format={\thu@title@font\heiti\sihao[1.538]},
  },
  subsubsection={
    afterindent=true,
    beforeskip={6bp \@plus 1ex \@minus .2ex},
    afterskip={6bp \@plus .2ex},
    format={\csname thu@title@font\endcsname\heiti\xiaosi[1.667] },
    name={,.},
    number=\arabic{subsubsection},
    indent={2em},
    aftername=\hskip 0.5\ccwd,
  },
  paragraph/afterindent=true,
  subparagraph/afterindent=true}
\newcounter{thu@bookmark}
\NewDocumentCommand\thu@chapter{s o m o}{
  \IfBooleanF{#1}{%
    \ClassError{thuthesis}{You have to use the star form: \string\thu@chapter*}{}
  }%
  \if@openright\cleardoublepage\else\clearpage\fi\phantomsection%
  \IfValueTF{#2}{%
    \ifthenelse{\equal{#2}{}}{%
      \addtocounter{thu@bookmark}\@ne
      \pdfbookmark[0]{#3}{thuchapter.\thethu@bookmark}
    }{%
      \addcontentsline{toc}{chapter}{#3}
    }
  }{%
    \addcontentsline{toc}{chapter}{#3}
  }%
  \chapter*{#3}%
  \IfValueTF{#4}{%
    \ifthenelse{\equal{#4}{}}
    {\@mkboth{}{}}
    {\@mkboth{#4}{#4}}
  }{%
    \@mkboth{#3}{#3}
  }
}


\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}
% ç›®å½•å­—ä½“
\renewcommand\tableofcontents{%
  \pagenumbering{Roman} % ç›®å½•é¡µç ä»1å¼€å§‹
  \thu@chapter*[]{\contentsname}
  \xiaosi[1.65]\@starttoc{toc}\normalsize}
\ifthu@arialtoc % æ˜¯å¦ä½¿ç”¨Arilä½“
  \def\thu@toc@font{\sffamily}
\fi
\def\@pnumwidth{2em}
\def\@tocrmarg{\@pnumwidth}
\def\@dotsep{1}
\patchcmd{\@dottedtocline}{#4}{\csname thu@toc@font\endcsname #4}{}{}
\patchcmd{\@dottedtocline}{\hb@xt@\@pnumwidth}{\hbox}{}{}
\renewcommand*\l@chapter[2]{%
  \ifnum \c@tocdepth >\m@ne
    \addpenalty{-\@highpenalty}%
    \vskip 4bp \@plus\p@
    \setlength\@tempdima{4em}%
    \begingroup
      \parindent \z@ \rightskip \@pnumwidth
      \parfillskip -\@pnumwidth
      \leavevmode
      \advance\leftskip\@tempdima
      \hskip -\leftskip
      % numberline is called here, and it uses \@tempdima
      {\ifthu@bachelor\sffamily\else\csname thu@toc@font\endcsname\fi\heiti #1}
      \leaders\hbox{$\m@th\mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$}\hfill
      \nobreak{\normalfont\normalcolor #2}\par
      \penalty\@highpenalty
    \endgroup
  \fi}
\renewcommand*\l@section{%
  \@dottedtocline{1}{\ccwd}{2.1em}}
\renewcommand*\l@subsection{%
  \@dottedtocline{2}{2\ccwd}{3em}}
\renewcommand*\l@subsubsection{%
  \@dottedtocline{3}{3.5em}{3.8em}}
\def\thu@def@term#1{%
  \define@key{thu}{#1}{\csname #1\endcsname{##1}}
  \expandafter\gdef\csname #1\endcsname##1{%
    \expandafter\gdef\csname thu@#1\endcsname{##1}}
  \csname #1\endcsname{}}
\thu@def@term{schoolcode}
\thu@def@term{classcode}
\thu@def@term{stunum}
\thu@def@term{secretlevel}
\thu@def@term{secretyear}
\thu@def@term{ctitle}
\thu@def@term{etitle}
\thu@def@term{cauthor}
\thu@def@term{csupervisor}
\thu@def@term{cassosupervisor}
\thu@def@term{ccosupervisor}
\thu@def@term{eauthor}
\thu@def@term{esupervisor}
\thu@def@term{eassosupervisor}
\thu@def@term{ecosupervisor}
\thu@def@term{cdegree}
\thu@def@term{edegree}
\thu@def@term{cdepartment}
\thu@def@term{submitdate}
\thu@def@term{replydate}
\thu@def@term{researchdirect}
\thu@def@term{chairman}
\thu@def@term{edepartment}
\thu@def@term{predegree}
\thu@def@term{ereplydate}
\def\caffil{% for compatibility
  \ClassWarning{thuthesis}
    {'\string\caffil' is deprecated, please use '\string\cdepartment' instead.}{}%
  \cdepartment}
\thu@def@term{edepartment}
\def\eaffil{% for compability
  \ClassWarning{thuthesis}
    {'\string\eaffil' is deprecated, please use '\string\edepartment' instead.}{}%
  \edepartment}
\thu@def@term{cmajor}
\def\csubject{% for compatibility
  \ClassWarning{thuthesis}
    {'\string\csubject' is deprecated, please use '\string\cmajor' instead.}{}%
  \cmajor}
\thu@def@term{emajor}
\def\esubject{%for compability
  \ClassWarning{thuthesis}
    {'\string\esubject' is deprecated, please use '\string\emajor' instead.}{}%
  \emajor}
\thu@def@term{cdate}
\thu@def@term{edate}
\thu@def@term{id}
\thu@def@term{udc}
\thu@def@term{catalognumber}
\thu@def@term{cfirstdiscipline}
\thu@def@term{cseconddiscipline}
\thu@def@term{postdoctordate}
\newcommand{\thu@@cabstract}[1]{\long\gdef\thu@cabstract{#1}}
\newenvironment{cabstract}{\Collect@Body\thu@@cabstract}{}
\newcommand{\thu@@eabstract}[1]{\long\gdef\thu@eabstract{#1}}
\newenvironment{eabstract}{\Collect@Body\thu@@eabstract}{}
% å…³é”®è¯
\def\thu@parse@keywords#1{
  \define@key{thu}{#1}{\csname #1\endcsname{##1}}
  \expandafter\gdef\csname thu@#1\endcsname{}
  \expandafter\gdef\csname #1\endcsname##1{
    \@for\reserved@a:=##1\do{
      \expandafter\ifx\csname thu@#1\endcsname\@empty\else
        \expandafter\g@addto@macro\csname thu@#1\endcsname{%
          \ignorespaces\csname thu@#1@separator\endcsname}
      \fi
      \expandafter\expandafter\expandafter\g@addto@macro%
        \expandafter\csname thu@#1\expandafter\endcsname\expandafter{\reserved@a}}}}
\thu@parse@keywords{ckeywords}
\thu@parse@keywords{ekeywords}
\def\thusetup{\kvsetkeys{thu}}
\newcommand\thu@underline[2][6em]{\hskip0pt\underline{\hb@xt@ #1{\hss#2\hss}}\hskip0pt}
\newlength{\thu@title@width}
\newlength{\thu@title@contentwidth}
\newcommand{\thu@put@title}[2][\thu@title@width]{%
  \begin{CJKfilltwosides}[b]{#1}#2\end{CJKfilltwosides}}
\def\thu@first@titlepage{%
  \ifthu@postdoctor\thu@first@titlepage@postdoctor\else\thu@first@titlepage@other\fi}
% ç¡•å£«é¦–é¡µ
\newcommand{\thu@first@titlepage@other}{
  \begin{center}
    \vspace*{-0.02cm}
	\parbox[t][1.8cm][t]{\paperwidth-6.34cm}{
		{\heiti\xiaosi å­¦æ ¡ä»£å·\thu@underline[79pt]{\thu@schoolcode}\hfill
			å­¦\hspace{2em}å·\thu@underline[79pt]{\thu@stunum}\\[3pt]
			{\ziju{0.5} åˆ†ç±»å·}\thu@underline[79pt]{\thu@classcode}\hfill
			å¯†\hspace{2em}çº§\thu@underline[79pt]{\thu@secretlevel}\\
		}
	}
    %\parbox[b][2.4cm][t]{\textwidth}{%
      %\ifthu@secret{\heiti\sanhao\thu@secretlevel\thu@%secret@content}\else\rule{1cm}{0cm}\fi} % ä¿å¯†
    % å¼€å§‹é¡µé¢
	\vskip 0.0cm
	\parbox[t][393bp][t]{\paperwidth-6.34cm}{
	\renewcommand{\baselinestretch}{1.3}
	\begin{center}
	  \includegraphics[width=195bp]{lut_new_logo_black}\par
	  \vskip 22bp%
	  \erhao[1.5]\textrm{\heiti\thu@apply}\par % å‰¯æ ‡é¢˜
	  \vskip 43bp%
	  \yihao[1.5]{\sffamily\heiti\thu@ctitle}\par % æ ‡é¢˜
	\end{center}}
	% ä¿¡æ¯
    \vskip 61pt
    \parbox[t][150bp][t]{\textwidth}{{\xiaosi[1.5]    		
     \begin{center}\fangsong
       \setlength{\thu@title@width}{85pt}
       \setlength{\thu@title@contentwidth}{190pt}
       \setlength{\extrarowheight}{5pt}
         %\begin{tabular}{p{84bp}@{}P@{\extracolsep{8pt}}l}
         \begin{tabular}[l]{p{\thu@title@width}@{}p{190pt}@{}} %å•å…ƒæ ¼æ— è¾¹è·
           \thu@put@title[\thu@title@width]{\heiti\thu@author@title} 	& {\thu@underline[\thu@title@contentwidth]{\songti\thu@cauthor}}\\
           \thu@put@title[\thu@title@width]{\heiti\thu@department@title}& {\thu@underline[\thu@title@contentwidth]{\songti\thu@cdepartment}}\\
           \thu@put@title[\thu@title@width]{\heiti\thu@supervisor@title}& {\thu@underline[\thu@title@contentwidth]{\songti\thu@csupervisor}}\\
           \thu@put@title[\thu@title@width]{\heiti\thu@major@title}		& {\thu@underline[\thu@title@contentwidth]{\songti\thu@cmajor}}\\
           \thu@put@title[\thu@title@width]{\heiti ç ”ç©¶æ–¹å‘}			& {\thu@underline[\thu@title@contentwidth]{\songti\thu@researchdirect}}\\
           \thu@put@title[\thu@title@width]{\heiti è®ºæ–‡æäº¤æ—¥æœŸ}		  & {\thu@underline[\thu@title@contentwidth]{\songti\thu@submitdate}}\\
         \end{tabular}
     \end{center}}}
 % æ—¥æœŸ
%     \begin{center}
%       {\ifthu@bachelor\vskip-1.0cm\hskip-1.2cm\xiaosi\else%
%         \vskip-0.5cm\sanhao\fi%
%         \songti\thu@cdate}
%     \end{center}
    \end{center}} % end of titlepage
% ç¬¬ä¸€é¡µï¼ˆç›²å®¡ï¼‰
\newcommand{\thu@first@titlepage@mangshen}{
  \begin{center}
    % å¼€å§‹é¡µé¢
	\vskip 0.0cm
	\parbox[t][290bp][t]{\paperwidth-6.34cm}{
	\renewcommand{\baselinestretch}{1.3}
	\begin{center}
	  \vskip 22bp%
	  {\songti\erhao[1.5] \thu@apply\par} % å‰¯æ ‡é¢˜
	  \vskip 43bp%
	  {\songti\yihao[1.5] \thu@ctitle\par} % æ ‡é¢˜
	\end{center}}
	% ä¿¡æ¯
    \parbox[t][150bp][t]{\textwidth}{{\xiaosi[1.5]    		
     \begin{center}
       \setlength{\thu@title@width}{85pt}
       \setlength{\thu@title@contentwidth}{190pt}
       \setlength{\extrarowheight}{5pt}
         %\begin{tabular}{p{84bp}@{}P@{\extracolsep{8pt}}l}
         \begin{tabular}[l]{p{\thu@title@width}@{}p{190pt}@{}} %å•å…ƒæ ¼æ— è¾¹è·
           \thu@put@title[\thu@title@width]{\songti\thu@major@title}		& {\thu@underline[\thu@title@contentwidth]{\songti\thu@cmajor}}\\
           \thu@put@title[\thu@title@width]{\songti ç ”ç©¶æ–¹å‘}			& {\thu@underline[\thu@title@contentwidth]{\songti\thu@researchdirect}}\\
         \end{tabular}
     \end{center}}}
 % æ—¥æœŸ
%     \begin{center}
%       {\ifthu@bachelor\vskip-1.0cm\hskip-1.2cm\xiaosi\else%
%         \vskip-0.5cm\sanhao\fi%
%         \songti\thu@cdate}
%     \end{center}
    \end{center}} % end of titlepage

% ç¬¬äºŒé¡µ
\newcommand{\thu@first@secondtitlepage@other}{	
	\begin{adjustwidth}{2.4cm}{0cm}					
%			\renewcommand{\baselinestretch}{1}
			{\heiti\xiaosi å­¦æ ¡ä»£å·ï¼š{\thu@schoolcode}\\[6pt]
				å­¦\hspace{2em}å·ï¼š{\thu@stunum}\\[6pt]
				å¯†\hspace{2em}çº§ï¼š{\thu@secretlevel}\\[115pt]
			}
			{\renewcommand{\baselinestretch}{1.5} 
				\xiaoer[1.5] \songti 
				å…°å·ç†å·¥å¤§å­¦ç¡•å£«å­¦ä½è®ºæ–‡}\\[75pt]	
			\parbox[t][][t]{\textwidth-75pt}{
				\renewcommand{\baselinestretch}{1.4}
				\erhao[1.4] \heiti
				\thu@ctitle\\[120pt]}
			\parbox[t][][t]{\textwidth-75pt}{				
				\renewcommand\arraystretch{1.2}
				\setlength{\thu@title@width}{92pt}
				\setlength{\thu@title@contentwidth}{246pt}
				\setlength{\extrarowheight}{5pt}
				 \begin{tabular}[l]{@{}p{\thu@title@width}@{}p{\thu@title@contentwidth}<{\centering}@{}} %å•å…ƒæ ¼æ— è¾¹è·
				 	\xiaosi[12pt]
				 	\thu@put@title[\thu@title@width]{{\heiti\thu@author@title ï¼š}}  	& {\songti\thu@cauthor} \\ 
				 	\specialrule{0.6pt}{-5.5pt}{0pt}  
				 	\thu@put@title[\thu@title@width]{{\heiti\thu@supervisor@title ï¼š}}& {{\songti\thu@csupervisor}}\\
				 	\specialrule{0.6pt}{-5.5pt}{0pt} 
				 	\thu@put@title[\thu@title@width]{{\heiti\thu@department@title ï¼š}}& {{\songti\thu@cdepartment}}\\
				 	\specialrule{0.6pt}{-5.5pt}{0pt} 
				 	\thu@put@title[\thu@title@width]{{\heiti ä¸“ä¸šåç§°ï¼š}}			& {{\songti\thu@cmajor}}\\ 
				 	\specialrule{0.6pt}{-5.5pt}{0pt} 
				 	\thu@put@title[\thu@title@width]{{\heiti è®ºæ–‡æäº¤æ—¥æœŸï¼š}}		  & {{\songti\thu@submitdate}}\\
				 	\specialrule{0.6pt}{-5.5pt}{0pt} 
				 	\thu@put@title[\thu@title@width]{{\heiti è®ºæ–‡ç­”è¾©æ—¥æœŸï¼š}}		  & {{\songti\thu@replydate}}\\
				 	\specialrule{0.6pt}{-5.5pt}{0pt}  
				 	\thu@put@title[\thu@title@width]{{\heiti ç­”è¾©å§”å‘˜ä¼šä¸»å¸­ï¼š}}		  & {{\songti\thu@chairman }}\\
				 	\specialrule{0.6pt}{-5.5pt}{0pt}  			 	
				 \end{tabular}
			}
%	\parbox[t][1.8cm][t]{\paperwidth-6.34cm}{
%		{\heiti\xiaosi å­¦æ ¡ä»£å·\thu@underline[79pt]{10731}\hfill
%			å­¦\hspace{2em}å·\thu@underline[79pt]{152081201002}\\[3pt]
%			{\ziju{0.5} åˆ†ç±»å·}\thu@underline[79pt]{TP391}\hfill
%			å¯†\hspace{2em}çº§\thu@underline[79pt]{å…¬\hspace{1em}å¼€}\\
%		}
%	}	
	\end{adjustwidth}
}
% è‹±æ–‡å°é¢
\newcommand{\thu@engcover}{%
  \newif\ifthu@professional\thu@professionalfalse
%  \ifthu@master
%    \ifthenelse{\equal{\thu@edegree}{\thu@master@art}}
%      {\relax}
%      {\ifthenelse{\equal{\thu@edegree}{\thu@master@sci}}
%        {\relax}
%        {\thu@professionaltrue}}
%  \fi
%  \ifthu@doctor
%    \ifthenelse{\equal{\thu@edegree}{\thu@doctor@phi}}
%      {\relax}
%      {\thu@professionaltrue}
%  \fi
  \begin{center}
    \vspace*{50pt}
    \parbox[t][][t]{\paperwidth-6.34cm}{
      \renewcommand{\baselinestretch}{1.5}
      \begin{center}
        \xiaosan[1.5]\thu@etitle%
      \end{center}}
      \renewcommand{\baselinestretch}{1.5}
      \begin{center}
	       \sihao[1.5]%
	       by \par
	       \thu@eauthor \par
	       \thu@predegree \par
	       A thesis submitted in partial satisfaction of the  \par
	       Requirements for the degree of \par
	       \thu@edegree \par
	       in \par
	       \thu@emajor \par
	       in the  \par
	       \thu@edepartment \par
	       Lanzhou University of Technology \par
	       Supervisor \par
	       \thu@esupervisor \par
	       \thu@ereplydate \par    
      \end{center}
%    \parbox[t][][t]{\paperwidth-6.34cm}{
%      \renewcommand{\baselinestretch}{1.5}
%      \begin{center}    
%        \ifthu@master Thesis \else Dissertation \par
%        Submitted to\\
%        {\bfseries Tsinghua University}\\
%        in partial fulfillment of the requirement\\
%        for the \ifthu@professional professional \fi
%        degree of\\
%        {\bfseries\sffamily\thu@edegree}%
%        \ifthu@professional\relax\else
%          \\in\\[3bp]
%          {\bfseries\sffamily\thu@emajor}%
%        \fi
%      \end{center}}
%    \parbox[t][][b]{\paperwidth-7.2cm}{
%      \renewcommand{\baselinestretch}{1.3}
%      \begin{center}
%        \sanhao\sffamily by\\[3bp]
%        \bfseries\thu@eauthor%
%        \ifthu@professional
%          \ifx\thu@emajor\empty\relax\else
%            \\(~\thu@emajor~)%
%        \fi\fi
%      \end{center}}
%    \par\vspace{0.9cm}
%    \parbox[t][2.1cm][t]{\paperwidth-7.2cm}{
%      \renewcommand{\baselinestretch}{1.2}
%      \xiaosan\centering
%      \begin{tabular}{rl}
%        \ifthu@master Thesis \else Dissertation \fi
%        Supervisor : & \thu@esupervisor\\
%        \ifx\thu@eassosupervisor\@empty
%          \else Associate Supervisor : & \thu@eassosupervisor\\\fi
%        \ifx\thu@ecosupervisor\@empty
%          \else Cooperate Supervisor : & \thu@ecosupervisor\\\fi
%      \end{tabular}}
%    \parbox[t][2cm][b]{\paperwidth-7.2cm}{
%    \begin{center}
%      \sanhao\bfseries\sffamily\thu@edate
%    \end{center}}
  \end{center}}
% æˆæƒé¡µ
\newcommand{\thu@authorization@mk}{%
%  \vspace*{0.42cm} % shit code!  estival:ï¼Ÿï¼Ÿï¼Ÿ 2018å¹´4æœˆ6æ—¥16:02:47
%  \begin{center}\erhao\heiti\thu@authtitle\end{center}
%  \vskip40pt\sihao[2.03]\par
%  \thu@authorization\par
%  \textbf{\thu@authorizationaddon}\par
%  \vskip1.0cm
%  \begingroup
%    \parindent0pt\xiaosi
%    \hspace*{1.5cm}\thu@authorsig\thu@underline[7em]\relax\hfill%
%                   \thu@teachersig\thu@underline[7em]\relax\hspace*{1cm}\\[3pt]
%    \hspace*{1.5cm}\thu@frontdate\thu@underline[7em]\relax\hfill%
%                   \thu@frontdate\thu@underline[7em]\relax\hspace*{1cm}
%  \endgroup
%	\newpage
	\vspace*{13.5pt}
	\banxiaosi[24pt]
	\begin{center}
		{\heiti\xiaoer[24pt] {\ziju{0.5} å…°å·ç†å·¥å¤§å­¦}} \\
		%\vspace{12pt}
		\vskip 12pt
		{\heiti\xiaoer[24pt] å­¦ä½è®ºæ–‡åŸåˆ›æ€§å£°æ˜}
		\vskip 12pt
	\end{center}
	\par æœ¬äººéƒ‘é‡å£°æ˜ï¼šæ‰€å‘ˆäº¤çš„è®ºæ–‡æ˜¯æœ¬äººåœ¨å¯¼å¸ˆçš„æŒ‡å¯¼ä¸‹ç‹¬ç«‹è¿›è¡Œç ”ç©¶æ‰€å–å¾—çš„ç ”ç©¶æˆæœã€‚é™¤äº†æ–‡ä¸­ç‰¹åˆ«åŠ ä»¥æ ‡æ³¨å¼•ç”¨çš„å†…å®¹å¤–ï¼Œæœ¬è®ºæ–‡ä¸åŒ…å«ä»»ä½•å…¶ä»–ä¸ªäººæˆ–é›†ä½“å·²ç»å‘è¡¨æˆ–æ’°å†™çš„æˆæœä½œå“ã€‚å¯¹æœ¬æ–‡çš„ç ”ç©¶åšå‡ºé‡è¦è´¡çŒ®çš„ä¸ªäººå’Œé›†ä½“ï¼Œå‡å·²åœ¨æ–‡ä¸­ä»¥æ˜ç¡®æ–¹å¼æ ‡æ˜ã€‚æœ¬äººå®Œå…¨æ„è¯†åˆ°æœ¬å£°æ˜çš„æ³•å¾‹åæœç”±æœ¬äººæ‰¿æ‹…ã€‚ \\[10pt]
%	\parbox[t][][t]{\paperwidth-6.34cm}{
	  \begingroup
		  \parindent0pt
		  \hspace*{1.5cm}ä½œè€…ç­¾åï¼š\hfill%
		  æ—¥æœŸï¼š\hspace{3em}å¹´\hspace{2em}æœˆ\hspace{2em}æ—¥\hspace*{1.5cm}\\[3pt]
	  \endgroup
%	}
	\begin{center}
		{\heiti\xiaoer[1.5] å­¦ä½è®ºæ–‡ç‰ˆæƒä½¿ç”¨æˆæƒä¹¦}\par
	\end{center}
	\par æœ¬å­¦ä½è®ºæ–‡ä½œè€…å®Œå…¨äº†è§£å­¦æ ¡æœ‰å…³ä¿ç•™ã€ä½¿ç”¨å­¦ä½è®ºæ–‡çš„è§„å®šï¼ŒåŒæ„å­¦æ ¡ä¿ç•™å¹¶å‘å›½å®¶æœ‰å…³éƒ¨é—¨æˆ–æœºæ„é€äº¤è®ºæ–‡çš„å¤å°ä»¶å’Œç”µå­ç‰ˆï¼Œå…è®¸è®ºæ–‡è¢«æŸ¥é˜…å’Œå€Ÿé˜…ã€‚æœ¬äººæˆæƒå…°å·ç†å·¥å¤§å­¦å¯ä»¥å°†æœ¬å­¦ä½è®ºæ–‡çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å†…å®¹ç¼–å…¥æœ‰å…³æ•°æ®åº“è¿›è¡Œæ£€ç´¢ï¼Œå¯ä»¥é‡‡ç”¨å½±å°ã€ç¼©å°æˆ–æ‰«æç­‰å¤åˆ¶æ‰‹æ®µä¿å­˜å’Œæ±‡ç¼–æœ¬å­¦ä½è®ºæ–‡ã€‚\par 
	æœ¬å­¦ä½è®ºæ–‡å±äº\par 
	\begingroup
	\begin{adjustwidth}{4.3cm}{0cm}
		1ã€ä¿å¯†\Square ï¼Œåœ¨\thu@underline[3em]{}å¹´è§£å¯†åé€‚ç”¨æœ¬æˆæƒä¹¦ã€‚\\ 
		2ã€ä¸ä¿å¯†\CheckedBox ã€‚\\
		ï¼ˆè¯·åœ¨ä»¥ä¸Šç›¸åº”æ–¹æ¡†å†…æ‰“â€œ\checkmarkâ€ï¼‰\\
	\end{adjustwidth}
	\endgroup
	 \begingroup
	 \parindent0pt
	 \hspace*{1.5cm}ä½œè€…ç­¾åï¼š\hfill%
	 æ—¥æœŸï¼š\hspace{3em}å¹´\hspace{2em}æœˆ\hspace{2em}æ—¥\hspace*{1.5cm}\\[3pt]
	 \hspace*{1.5cm}å¯¼å¸ˆç­¾åï¼š\hfill%
	 æ—¥æœŸï¼š\hspace{3em}å¹´\hspace{2em}æœˆ\hspace{2em}æ—¥\hspace*{1.5cm}\\[3pt]
	 \endgroup
	
  }

% ç”Ÿæˆå°é¢
\def\makecover{%
  \thu@setup@pdfinfo\thu@makecover}
% ç”Ÿæˆæ‘˜è¦
\def\makeabstract{%
	\thu@setup@pdfinfo\thu@makeabstract}
\def\thu@setup@pdfinfo{%
  \hypersetup{%
    pdftitle={\thu@ctitle},
    pdfauthor={\thu@cauthor},
    pdfsubject={\thu@cdegree},
    pdfkeywords={\thu@ckeywords},
    pdfcreator={\thuthesis-v\version}}}
\NewDocumentCommand{\thu@makecover}{o}{
  \phantomsection
  \pdfbookmark[-1]{\thu@ctitle}{ctitle}
  \normalsize%
  \begin{titlepage}
  	  \ifthu@mangshen
	  	\thu@first@titlepage@mangshen\clearpage
  	  \else
	    \thu@first@titlepage\clearpage
	    \thu@first@secondtitlepage@other\clearpage
	    \thu@engcover\clearpage
	    %\cleardoublepage\thu@engcover
	    \IfNoValueTF{#1}{%
	      \thu@authorization@mk
	    }{%
	      \includepdf{#1}%
	    }%
    \fi
  \end{titlepage}
  \normalsize
%  \thu@makeabstract
	\pagestyle{thu@headings}
  \let\@tabular\thu@tabular}

% å…³é”®è¯
\newbox\thu@kw
\newcommand\thu@put@keywords[2]{%
  \begingroup
    \setbox\thu@kw=\hbox{#1}
    \ifthu@bachelor\indent\else\noindent\hangindent\wd\thu@kw\hangafter1\fi%
    \box\thu@kw#2\par
  \endgroup}
% æ‘˜è¦
\newcommand{\thu@makeabstract}{%
  \clearpage
  % ä¸­æ–‡
  \thu@chapter*{\cabstractname} % no tocline
  \ifthu@bachelor
    \pagestyle{thu@plain}
  \else
    \pagestyle{thu@headings}
  \fi
  \pagenumbering{Roman} % æ‘˜è¦é¡µç ä»1å¼€å§‹
  \thu@cabstract
  \vskip12bp
  \thu@put@keywords{\heiti\thu@ckeywords@title\thu@ckeywords}{}
  \clearpage
  % è‹±æ–‡
  \thu@chapter*{\eabstractname} % no tocline
  \thu@eabstract
  \vskip12bp
  \thu@put@keywords{%
    \textbf{Key Words:\enskip}}{\thu@ekeywords}}
\newenvironment{denotation}[1][2.5cm]{%
  \thu@chapter*{\thu@denotation@name} % no tocline
  \vskip-30bp\xiaosi[1.6]\begin{thu@denotation}[labelwidth=#1]
}{%
  \end{thu@denotation}
}
\newlist{thu@denotation}{description}{1}
\setlist[thu@denotation]{%
  nosep,
  font=\normalfont,
  align=left,
  leftmargin=!, % sum of the following 3 lengths
  labelindent=0pt,
  labelwidth=2.5cm,
  labelsep*=0.5cm,
  itemindent=0pt,
}
% å‚è€ƒæ–‡çŒ®
\NewDocumentEnvironment{references}{o}{%
    \thu@chapter*{å‚è€ƒæ–‡çŒ®}
  }{}
% æ€»ç»“ä¸å±•æœ›
\NewDocumentEnvironment{conclusion}{o}{%
    \thu@chapter*{æ€»ç»“ä¸å±•æœ›}
  }{}
% ç¼©ç•¥è¯æ³¨é‡Šè¡¨
\NewDocumentEnvironment{abbreviation}{o}{%
  \thu@chapter*{ç¼©ç•¥è¯æ³¨é‡Šè¡¨}
}{}
% è‡´è°¢
\NewDocumentEnvironment{acknowledgment}{o}{%
    \thu@chapter*{\thu@ackname}
  }
  {
%    \ifthu@postdoctor\relax\else%
%      \IfNoValueTF{#1}{%
%        \thu@chapter*{\thu@declarename}
%        \par{\xiaosi\parindent2em\thu@declaretext}\vskip2cm
%        {\xiaosi\hfill\thu@signature\thu@underline[2.5cm]\relax%
%         \thu@backdate\thu@underline[2.5cm]\relax}%
%      }{%
%        \includepdf[pagecommand={\thispagestyle{thu@empty}%
%          \phantomsection\addcontentsline{toc}{chapter}{\thu@declarename}%
%        }]{#1}%
%      }%
%    \fi
  }
\let\ack\acknowledgement
\let\endack\endacknowledgement

\def\thu@starttoc#1{% #1: float type, prepend type name in \listof*** entry.
  \let\oldnumberline\numberline
  \def\numberline##1{\oldnumberline{\csname #1name\endcsname\hskip.4em ##1}}
  \@starttoc{\csname ext@#1\endcsname}
  \let\numberline\oldnumberline}
\def\thu@listof#1{% #1: float type
  \@ifstar
    {\thu@chapter*{\csname list#1name\endcsname}
	    \setlength{\cfttabindent}{0pt}
	    \setlength\cftbeforechapskip{0pt}
	    \setlength\cftbeforetabskip{0pt}
    \thu@starttoc{#1}    }
    {\thu@chapter*{\csname list#1name\endcsname}\thu@starttoc{#1}}}
\renewcommand\listoffigures{\thu@listof{figure}}
\renewcommand*\l@figure{\addvspace{2bp}\@dottedtocline{1}{0em}{4em}}
\renewcommand\listoftables{\thu@listof{table}}
\let\l@table\l@figure
% å®šä¹‰å…¬å¼åˆ—è¡¨
\def\ext@equation{loe}
\def\equcaption#1{%
  \addcontentsline{\ext@equation}{equation}%
                  {\protect\numberline{#1}}}
\newcommand\listofequations{\thu@listof{equation}}
\let\l@equation\l@figure % åˆ—è¡¨æ ¼å¼
% å®šä¹‰ç®—æ³•åˆ—è¡¨
\def\ext@algocf{loa} % å¿…ä¸å¯å°‘ï¼ï¼ estival æ·±å¤œ 2018å¹´4æœˆ9æ—¥01:46:19
% ä¸‹é¢ä¸‰è¡Œåˆ é™¤ï¼Œä½¿ç”¨è‡ªå¸¦å…¬å¼åˆ—è¡¨ï¼Œalgorithm2eä¸­å…³é”®å­—ä¸ºalgocf
%\def\algocf#1{%
%  \addcontentsline{\ext@algocf}{algocf}%
%                  {\protect\numberline{#1}}}
\renewcommand\listofalgorithms{\thu@listof{algocf}} 
\let\l@algocf\l@figure % åˆ—è¡¨æ ¼å¼
%\renewcommand{\listofalgorithms}{\tocfile{ç®—æ³•ç´¢å¼•}{loa}}
%\let\oldlistofalgorithms\listofalgorithms
%\renewcommand{\listofalgorithms}{%
%  \begingroup%
%  \let\oldnumberline\numberline%
%  \renewcommand{\numberline}{ç®—æ³•~\oldnumberline}%
%  \oldlistofalgorithms%
%  \endgroup}
%\let\l@algorithm\l@figure
% ç®—æ³•ç¼–å·æ–¹å¼
%\floatname{algorithm}{ç®—æ³•} 
%\renewcommand{\algorithmicrequire}{\kaishu{è¾“å…¥:}} 
%\renewcommand{\algorithmicensure}{\kaishu{è¾“å‡º:}}
% ç®—æ³•æ³¨é‡Š
%\renewcommand\algorithmiccomment[1]{%
%  \hfill\ // \ \eqparbox{COMMENT}{#1}%
%}
%\newcommand\LONGCOMMENT[2]{%
%  \hfill\ // \ \begin{minipage}[t]{#2}#1\strut\end{minipage}%
%}
% ç®—æ³•æ ‡é¢˜å­—å·
\renewcommand{\AlCapFnt}{\heiti\wuhao}
\renewcommand{\AlCapNameFnt}{\AlCapFnt}
\SetAlFnt{\small}
\newenvironment{myAlgorithm}[1][htb]
	{\renewcommand{\algorithmcfname}{ç®—æ³•}
	\begin{algorithm}[#1]}
	{\end{algorithm}}

\bibpunct{[}{]}{,}{s}{}{,}
\renewcommand\NAT@citesuper[3]{\ifNAT@swa%
  \unskip\kern\p@\textsuperscript{\NAT@@open #1\NAT@@close}%
  \if*#3*\else\ (#3)\fi\else #1\fi\endgroup}
\DeclareRobustCommand\inlinecite{\@inlinecite}
\def\@inlinecite#1{\begingroup\let\@cite\NAT@citenum\citep{#1}\endgroup}
\let\onlinecite\inlinecite
\def\thudot{\ifthu@bachelor\else\unskip.\fi}
\renewenvironment{thebibliography}[1]{%
   \thu@chapter*{\bibname}%
   \wuhao[1.5]
   \list{\@biblabel{\@arabic\c@enumiv}}%
        {\renewcommand{\makelabel}[1]{##1\hfill}
         \settowidth\labelwidth{1.1cm}
         \setlength{\labelsep}{0.4em}
         \setlength{\itemindent}{0pt}
         \setlength{\leftmargin}{\labelwidth+\labelsep}
         \addtolength{\itemsep}{-0.7em}
         \usecounter{enumiv}%
         \let\p@enumiv\@empty
         \renewcommand\theenumiv{\@arabic\c@enumiv}}%
    \sloppy\frenchspacing
    \clubpenalty4000
    \@clubpenalty \clubpenalty
    \widowpenalty4000%
    \interlinepenalty4000%
    \sfcode`\.\@m}
   {\def\@noitemerr
     {\@latex@warning{Empty `thebibliography' environment}}%
    \endlist\frenchspacing}
\let\thu@appendix\appendix
\renewenvironment{appendix}{%
  \let\title\thu@appendix@title
  \thu@appendix}{%
  \let\title\@gobble}
\let\title\@gobble
\newcommand{\thu@appendix@title}[1]{%
  \begin{center}
    \bfseries\xiaosi #1
  \end{center}}
\newlist{translationbib}{enumerate}{1}
\setlist[translationbib]{label=[\arabic*],align=left,nosep,itemsep=6bp,
  leftmargin=9.5mm,labelsep=!,before=\vspace{0.5\baselineskip}\wuhao[1.3]}
\newenvironment{resume}[1][\thu@resume@title]{%
  \thu@chapter*{#1}}{}
\newcommand{\resumeitem}[1]{%
  \vspace{24bp}{\sihao\heiti\centerline{#1}}\par\vspace{6bp}}
\newcommand{\researchitem}[1]{%
  \vspace{32bp}{\sihao\heiti\centerline{#1}}\par\vspace{14bp}}
\newlist{publications}{enumerate}{1}
\setlist[publications]{label=[\arabic*],align=left,nosep,itemsep=5bp,
  leftmargin=9.5mm,labelsep=!,before=\xiaosi[1.26],resume}
\newlist{achievements}{enumerate}{1}
\setlist[achievements]{label=[\arabic*],align=left,nosep,itemsep=8bp,
  leftmargin=10mm,labelsep=!,before=\xiaosi[1.26]}
\def\publicationskip{\bigskip\bigskip}
\NewDocumentCommand{\shuji}{O{\thu@ctitle} O{\thu@cauthor}}{%
  \newpage\thispagestyle{empty}\fangsong\xiaosan\ziju{0.4}%
  \noindent\hfill\rotatebox[origin=lt]{-90}{\makebox[\textheight]{#1\hfill#2}}}
\AtEndOfClass{\input{thuthesis.cfg}}
\AtEndOfClass{\sloppy}
\endinput


%%
%% End of file `thuthesis.cls'.
